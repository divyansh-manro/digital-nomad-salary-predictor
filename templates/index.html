<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Digital Nomad Salary Predictor</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        /* ---------- Page base ---------- */
        :root{
            --accent: #6c63ff;
            --accent-dark: #5a52d6;
            --muted: rgba(0,0,0,0.55);
        }
        html,body{
            height:100%;
            margin:0;
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
            background:#f8f7f6;
            color:#222;
        }

        /* ---------- Hero ---------- */
        .hero {
            height: 72vh;
            min-height: 540px;
            position: relative;
            display:flex;
            align-items:center;
            justify-content:center;
            overflow:hidden;
            background-image: url('/mnt/data/3d03025d-55f6-43f3-89bb-b0984396ff6e.png');
            background-size: cover;
            background-position: center;
        }

        /* soft white overlay with subtle vignette */
        .hero::before{
            content: "";
            position:absolute;
            inset:0;
            background: linear-gradient(180deg, rgba(255,255,255,0.82) 10%, rgba(255,255,255,0.95) 75%);
            backdrop-filter: blur(6px) saturate(1.05);
            pointer-events:none;
        }
        .hero-inner{
            position:relative; /* above overlay */
            max-width:1100px;
            width:100%;
            padding: 56px 28px;
            display:grid;
            grid-template-columns: 1fr 420px;
            gap:32px;
            align-items:center;
        }

        /* ---------- Left hero text ---------- */
        .hero-title{
            text-align:left;
            font-family: Georgia, "Times New Roman", Times, serif;
        }
        .hero-title h1{
            margin:0;
            font-size: clamp(28px, 6vw, 56px);
            line-height: 0.95;
            letter-spacing: 1.6px;
            color:#111;
            font-weight:700;
            text-transform:uppercase;
        }
        .hero-title p.lead{
            margin-top:6px;
            color: var(--muted);
            font-size: 1.05rem;
            font-style: italic;
        }
        .hero-subnote{
            margin-top:18px;
            font-size:0.85rem;
            color:var(--muted);
            letter-spacing:0.6px;
        }

        /* decorative vertical rule */
        .decor-rule{
            width:48px;
            height:2px;
            background:linear-gradient(90deg, transparent, #ccc, transparent);
            margin:18px 0;
        }

        /* ---------- Right card (form) ---------- */
        .glass-card{
            background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.86));
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(12,12,20,0.08);
            padding:22px;
            border: 1px solid rgba(18,18,30,0.04);
        }
        .glass-card .card-title{
            font-size:1.1rem;
            font-weight:700;
            margin-bottom:6px;
            color:#111;
        }
        .glass-card .card-sub{
            font-size:0.9rem;
            color:var(--muted);
            margin-bottom:12px;
        }
        .form-label{
            font-weight:600;
            color:#333;
        }

        /* Inputs slightly larger and with subtle rounded look */
        .form-control{
            border-radius: 12px;
            padding: 10px 12px;
            border: 1px solid rgba(18,18,30,0.06);
            box-shadow: inset 0 1px 0 rgba(255,255,255,0.5);
        }
        .form-control:focus{
            box-shadow: 0 0 0 4px rgba(108,99,255,0.12);
            border-color: var(--accent);
            outline: none;
        }

        /* Buttons */
        .btn-predict{
            background: linear-gradient(180deg,var(--accent), var(--accent-dark));
            border:none;
            border-radius: 12px;
            padding:10px 22px;
            font-weight:700;
            letter-spacing:0.6px;
            box-shadow: 0 10px 24px rgba(108,99,255,0.12);
        }
        .btn-predict:active{ transform: translateY(1px); }

        /* result container (below hero) */
        .result-section{
            max-width:1100px;
            margin: -60px auto 48px; /* lifts it slightly over the hero bottom */
            padding: 24px;
            position: relative;
            z-index: 10;
        }
        .result-card{
            border-radius:18px;
            padding:24px;
            background: white;
            box-shadow: 0 18px 40px rgba(12,12,30,0.06);
            border: 1px solid rgba(20,20,30,0.04);
        }
        .predicted {
            font-size: clamp(26px, 3.6vw, 40px);
            font-weight:800;
            color: var(--accent);
            letter-spacing: 0.6px;
        }

        /* small responsive adjustments */
        @media (max-width: 980px){
            .hero-inner{
                grid-template-columns: 1fr;
                padding: 36px 16px;
            }
            .hero{
                height: auto;
                padding: 28px 0 46px;
            }
            .result-section{
                margin-top: 20px;
            }
        }

        /* list group feature item styling */
        .list-group-item{
            border-radius:10px;
            margin-bottom:8px;
            border:1px solid rgba(10,10,20,0.03);
        }
        .feature-icon{
            display:inline-block;
            min-width:26px;
            height:26px;
            line-height:26px;
            text-align:center;
            border-radius:6px;
            background: rgba(108,99,255,0.08);
            color:var(--accent);
            margin-right:12px;
            font-weight:700;
        }
    </style>
</head>
<body>
    <!-- HERO -->
    <header class="hero" role="banner" aria-label="hero">
        <div class="hero-inner">
            <!-- Left content -->
            <div class="hero-title">
                <h1>Luxe Nomad Salary Insights</h1>
                <p class="lead">for entrepreneurs and location-independent professionals</p>

                <div class="decor-rule" aria-hidden="true"></div>

                <p class="hero-subnote">Estimate your potential earnings across roles, productivity and lifestyle choices — simple, quick, and practical.</p>
            </div>

            <!-- Right form (glass card) - we keep existing IDs and form structure unchanged -->
            <div>
                <div class="glass-card">
                    <div class="card-title">Digital Nomad Salary Predictor</div>
                    <div class="card-sub">Estimate your potential salary as a location-independent worker</div>

                    <form id="salaryForm" novalidate>
                        <div class="row g-3">
                            <div class="col-md-12">
                                <label for="job_role" class="form-label">Job Role</label>
                                <input type="text" class="form-control" id="job_role" required placeholder="e.g., Data Scientist, Web Developer">
                            </div>

                            <div class="col-md-12">
                                <label for="location" class="form-label">Location (City, Country)</label>
                                <input type="text" class="form-control" id="location" required placeholder="e.g., Lisbon, Portugal">
                            </div>

                            <div class="col-md-4">
                                <label for="productivity" class="form-label">Productivity (1-10)</label>
                                <input type="number" class="form-control" id="productivity" min="1" max="10" required>
                            </div>
                            <div class="col-md-4">
                                <label for="burnout_level" class="form-label">Burnout Level (1-10)</label>
                                <input type="number" class="form-control" id="burnout_level" min="1" max="10" required>
                            </div>
                            <div class="col-md-4">
                                <label class="form-label d-block">Options</label>
                                <div class="d-flex align-items-center">
                                    <div class="form-check me-3">
                                        <input class="form-check-input" type="checkbox" id="company_remote">
                                        <label class="form-check-label" for="company_remote">Remote Company</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="nomad_visa">
                                        <label class="form-check-label" for="nomad_visa">Nomad Visa</label>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 text-end mt-2">
                                <button type="submit" class="btn btn-predict btn-lg text-white">Predict Salary</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </header>

    <!-- RESULT SECTION (initially hidden via inline style from JS logic, but we preserve IDs) -->
    <main class="result-section container">
        <div id="resultCardWrapper" class="result-card" style="display:none;">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h4 class="mb-2">Predicted Salary</h4>
                    <div id="predictedSalary" class="predicted">$0</div>
                    <p class="mt-2" style="color:var(--muted);">This is an estimate based on the inputs you provided.</p>
                </div>

                <div class="col-md-6">
                    <div class="card border-0">
                        <div class="card-body p-0">
                            <h6 class="mb-3" style="font-weight:700;color:#222;">Input Features</h6>
                            <ul class="list-group list-group-flush" id="featureList">
                                <!-- Features injected by JS -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Keep existing script linking exactly as before -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Keep your original JS logic intact; I only added small DOM hook to toggle display container (preserving all IDs and /predict call) -->
    <script>
        document.getElementById('salaryForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Get form values
            const job_role = document.getElementById('job_role').value;
            const location = document.getElementById('location').value;
            const productivity = document.getElementById('productivity').value;
            const burnout_level = document.getElementById('burnout_level').value;
            const company_remote = document.getElementById('company_remote').checked ? 'Y' : 'N';
            const nomad_visa = document.getElementById('nomad_visa').checked ? 'Y' : 'N';

            // Create payload
            const payload = {
                job_role,
                company_remote,
                location,
                nomad_visa,
                productivity,
                burnout_level
            };

            // Send to backend
            fetch('/predict', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(payload)
            })
            .then(response => response.json())
            .then(data => {
                if (data.error) {
                    alert('Error: ' + data.error);
                    return;
                }

                // Display results
                document.getElementById('predictedSalary').textContent =
                    '$' + data.predicted_salary_usd.toLocaleString();

                // Display features
                const featureList = document.getElementById('featureList');
                featureList.innerHTML = '';

                for (const [key, value] of Object.entries(data.input_features)) {
                    const li = document.createElement('li');
                    li.className = 'list-group-item d-flex align-items-center';
                    li.innerHTML = `
                        <span class="feature-icon">→</span>
                        <strong>${key.replace('_', ' ')}:</strong> &nbsp;${value}
                    `;
                    featureList.appendChild(li);
                }

                // Show result container (we're using resultCardWrapper)
                document.getElementById('resultCardWrapper').style.display = 'block';
                // Smooth scroll into view for nicer UX
                document.getElementById('resultCardWrapper').scrollIntoView({behavior:'smooth', block:'center'});
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred. Please try again.');
            });
        });
    </script>
</body>
</html>
